<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>استمارة التقديم الإلكتروني – مسابقة الندب</title>

    <style>
        body {
            font-family: Tahoma, Arial, sans-serif;
            background: #f4f4f4;
            margin: 0;
            line-height: 1.8;
        }

        .page {
            max-width: 1100px;
            margin: 20px auto;
            background: #fff;
            border: 1px solid #ccc;
            padding: 25px;
        }

        /* ===== Header ===== */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #000;
            padding-bottom: 15px;
            margin-bottom: 25px;
        }

        .header img {
            height: 70px;
        }

        .header h1 {
            font-size: 20px;
            margin: 0;
            text-align: center;
            flex: 1;
        }

        /* ===== Form ===== */
        .form-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        label {
            font-weight: bold;
            font-size: 14px;
        }

        input, select {
            width: 100%;
            padding: 8px;
            font-size: 14px;
        }

        .full {
            grid-column: 1 / 3;
        }

        h2 {
            font-size: 18px;
            border-bottom: 1px solid #000;
            padding-bottom: 5px;
            margin-top: 30px;
        }

        /* ===== Courses ===== */
        .course {
            border: 1px dashed #999;
            padding: 15px;
            margin-bottom: 15px;
        }

        .add-btn {
            background: #0a5aa5;
            color: #fff;
            border: none;
            padding: 10px 18px;
            cursor: pointer;
            font-size: 14px;
        }

        /* ===== Acknowledgment ===== */
        .ack {
            margin-top: 25px;
            padding: 15px;
            border: 1px solid #999;
            background: #fafafa;
        }

        /* ===== Submit ===== */
        .submit-btn {
            margin-top: 25px;
            background: #000;
            color: #fff;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
        }

        footer {
            text-align: center;
            margin-top: 30px;
            font-size: 13px;
            color: #555;
        }
    </style>
</head>
<script>
function toArabicNumbers(str) {
    return str.replace(/\d/g, d => '٠١٢٣٤٥٦٧٨٩'[d]);
}

document.querySelectorAll("input").forEach(input => {
    input.addEventListener("input", function () {
        this.value = toArabicNumbers(this.value);
    });
});
</script>

<body>

<div class="page">

    <!-- ===== Header ===== -->
    <div class="header">
        <img src="logo-right.png" alt="Logo Right">
        <h1>
            استمارة التقديم الإلكتروني<br>
            لمسابقة الندب رقم ١ لعام ٢٠٢٦
        </h1>
        <img src="logo-left.png" alt="Logo Left">
    </div>

    <!-- ===== Form ===== -->
    <form id="applicationForm" onsubmit="submitForm(event)">

        <h2>البيانات الشخصية</h2>

        <div class="form-group">
            <div>
                <label>الرقم القومي</label>
                <input type="text" required>
          
                <label>الاسم بالكامل</label>
                <input type="text" required>
            </div>

            <div>
                <label>تاريخ الميلاد</label>
                <input type="date">
        
                <label>النوع</label>
                <select>
                    <option>ذكر</option>
                    <option>أنثى</option>
                </select>
            </div>
        </div>

        <h2>البيانات الوظيفية</h2>

        <div class="form-group">
            <div>
                <label>جهة العمل</label>
                <input type="text">
           
                <label>الوظيفة الحالية</label>
                <input type="text">
            </div>

            <div>
                <label>تاريخ التعيين</label>
                <input type="date">
         
                <label>المستوى الوظيفي</label>
                <input type="text">
            </div>

            <div class="full">
                <label>الوظيفة المتقدم إليها</label>
                <input type="text">
            </div>
        </div>

        <h2>الدورات التدريبية</h2>

        <div id="courses"></div>

        <button type="button" class="add-btn" onclick="addCourse()">
            ➕ إضافة دورة تدريبية
        </button>

        <div class="ack">
            <label>
                <input type="checkbox" required>
                أقر بأن جميع البيانات التي قمت بإدخالها صحيحة، وأتحمل كامل المسئولية القانونية عن ذلك.
            </label>
        </div>

        <button type="submit" class="submit-btn">
            إرسال البيانات
        </button>

    </form>

    <footer>
        © مصلحة الجمارك المصرية – قطاع الموارد البشرية
    </footer>

</div>

<script>
    function addCourse() {
        const div = document.createElement("div");
        div.className = "course";
        div.innerHTML = `
            <div class="form-group">
                <div>
                    <label>اسم الدورة</label>
                    <input type="text">
                </div>
                <div>
                    <label>مكان الدورة</label>
                    <input type="text">
                </div>
                <div>
                    <label>مدة الدورة</label>
                    <input type="text">
                </div>
                <div>
                    <label>تاريخ الدورة</label>
                    <input type="date">
                </div>
            </div>
        `;
        document.getElementById("courses").appendChild(div);
    }
</script>
<script>
function submitForm(e) {
    e.preventDefault();

    const courses = [];
    document.querySelectorAll(".course").forEach(course => {
        const inputs = course.querySelectorAll("input");
        courses.push({
            name: inputs[0]?.value || "",
            place: inputs[1]?.value || "",
            duration: inputs[2]?.value || "",
            date: inputs[3]?.value || ""
        });
    });

    const data = {
        nationalId: document.querySelectorAll('input')[0].value,
        fullName: document.querySelectorAll('input')[1].value,
        birthDate: document.querySelectorAll('input[type="date"]')[0].value,
        gender: document.querySelector('select').value,
        workPlace: document.querySelectorAll('input')[2].value,
        currentJob: document.querySelectorAll('input')[3].value,
        hireDate: document.querySelectorAll('input[type="date"]')[1].value,
        level: document.querySelectorAll('input')[4].value,
        appliedJob: document.querySelectorAll('input')[5].value,
        courses: courses
    };

    fetch("https://script.google.com/macros/s/AKfycbysvNdeMf314X5N0gX9UXYz3nBpguV6eRhSEnjFIZOFvZtE9AhNqDL_M46tSx1Zuh9blw/exec", {
        method: "POST",
        body: JSON.stringify(data)
    })
    .then(response => response.text())
    .then(result => {
        if (result === "EXISTS") {
            alert("⚠️ هذا الرقم القومي مسجل بالفعل");
        } else {
            alert("✅ تم تسجيل البيانات بنجاح");
            document.getElementById("applicationForm").reset();
            document.getElementById("courses").innerHTML = "";
        }
    })
    .catch(error => {
        alert("❌ حدث خطأ أثناء الإرسال");
        console.error(error);
    });
}
</script>

</body>
</html>
