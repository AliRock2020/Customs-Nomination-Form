<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta charset="UTF-8">
<title>تسجيل بيانات المتقدم</title>

<style>
body{
  margin:0;
  font-family:Tahoma, Arial;
  background:#f4f6f8;
}

.container{
  max-width:1100px;
  width:95%;
  margin:20px auto;
}

.logos{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:20px;
  flex-wrap:wrap;
}

.logos img{
  height:110px;
}

h2{
  background:#eee;
  padding:10px;
  margin-top:30px;
}

.form-row{
  display:flex;
  gap:15px;
  margin-bottom:15px;
}

.form-row input,
.form-row select{
  flex:1;
  padding:12px;
  font-size:14px;
}

.full-width{
  width:100%;
  padding:12px;
  margin-bottom:15px;
}

.course-row{
  border:1px solid #ccc;
  padding:15px;
  margin-bottom:15px;
  background:#fafafa;
}

.course-header{
  display:flex;
  justify-content:space-between;
  margin-bottom:10px;
}

.course-line{
  display:flex;
  gap:15px;
  margin-bottom:10px;
}

.course-line input{
  flex:1;
  padding:12px;
}

.remove-course{
  background:#c0392b;
  color:#fff;
  border:none;
  padding:5px 10px;
  cursor:pointer;
}

.add-course{
  background:#eee;
  border:1px dashed #999;
  padding:10px;
  cursor:pointer;
}

.submit-btn{
  margin-top:20px;
  width:100%;
  padding:15px;
  background:#0066cc;
  color:#fff;
  border:none;
  font-size:16px;
}

.hidden{
  display:none;
}
  .form-title{
  text-align:center;
  margin:20px 0 30px;
  font-size:24px;
  color:#222;
  font-weight:bold;
}
  .form-title::after{
  content:"";
  display:block;
  width:120px;
  height:3px;
  background:#0066cc;
  margin:10px auto 0;
}
@media (max-width: 768px){
  .header{
    height:180px;
  }

  .header h1{
    font-size:18px;
    padding:10px;
  }
}


@media (max-width: 768px){

  .form-row{
    flex-direction:column;
  }

  .course-line{
    flex-direction:column;
  }

    .logos{
    flex-direction:row;
    flex-wrap:nowrap;
    gap:10px;
  }

  .logos img{
    height:70px;
    max-width:45%;
    object-fit:contain;
  }

  .form-title{
    font-size:20px;
    margin-bottom:20px;
  }

  h2{
    font-size:18px;
  }

  .submit-btn{
    font-size:15px;
  }
}

</style>
</head>

<body>

<div class="container">

<div class="logos">
  <img src="logo-right.png">
  <img src="logo-left.png">
</div>
<h1 class="form-title">
  استمارة تسجيل بيانات المتقدم لمسابقة الندب رقم ١ لسنة ٢٠٢٦
</h1>
<form id="dataForm">

<h2>البيانات الشخصية</h2>

<div class="form-row">
  <input id="fullName" placeholder="الاسم بالكامل" required>
  <input id="nationalId" placeholder="الرقم القومي" maxlength="14" required>
</div>

<div class="form-row">
  <input id="mobile" placeholder="رقم الموبايل" maxlength="11" required>
  <input type="text" id="birthDate" placeholder="تاريخ الميلاد"
   onfocus="this.type='date'" onblur="if(!this.value)this.type='text'" required>
  <select id="gender" required>
    <option value="">النوع</option>
    <option>ذكر</option>
    <option>أنثى</option>
  </select>
</div>
<div class="form-row">
  <input id="address"  placeholder="العنوان" required>
</div>


<h2>البيانات الجامعية</h2>

<div class="form-row">
  <input id="university" placeholder="الجامعة" required>
  <input id="college" placeholder="الكلية" required>
</div>

<div class="form-row">
  <input id="qualification" placeholder="المؤهل الجامعي" required>
  <input id="grade" placeholder="التقدير العام" required>
</div>

<h2>البيانات الوظيفية</h2>

<div class="form-row">
  <input id="workPlace" placeholder="جهة العمل" required>
  <input id="level" placeholder="المستوى الوظيفي" required>
  <input type="text" id="hireDate" placeholder="تاريخ التعيين"
   onfocus="this.type='date'" onblur="if(!this.value)this.type='text'" required>
</div>

<div class="form-row">
  <input id="currentJob" placeholder="الوظيفة الحالية" required>
  <input id="appliedJob" placeholder="الوظيفة المتقدم إليها" required>
</div>

<h2>الدورات التدريبية</h2>

<div id="coursesContainer"></div>

<button type="button" class="add-course" onclick="addCourse()">+ إضافة دورة</button>

<label style="display:block;margin-top:20px">
<input type="checkbox" id="confirm" required>
 أقر بأن جميع البيانات صحيحة وأتحمل كامل المسئولية
</label>

<button type="submit" class="submit-btn">حفظ البيانات</button>

</form>
</div>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbwEvyZAANv0Tqxy_TaqZBWL7x0rzeCi36R-X_018VcQhA_IXQYTLdolLldFbb0waivv/exec";

function addCourse(){
  const div=document.createElement("div");
  div.className="course-row";
  div.innerHTML=`
    <div class="course-header">
      <strong>دورة تدريبية</strong>
      <button type="button" class="remove-course"
       onclick="this.closest('.course-row').remove()">حذف</button>
    </div>
    <div class="course-line">
      <input placeholder="اسم الدورة">
      <input placeholder="مكان الدورة">
    </div>
    <div class="course-line">
      <input placeholder="مدة الدورة">
      <input type="text" placeholder="تاريخ الدورة"
       onfocus="this.type='date'" onblur="if(!this.value)this.type='text'">
    </div>`;
  document.getElementById("coursesContainer").appendChild(div);
}
  
document.getElementById("dataForm").onsubmit=e=>{
  e.preventDefault();

  if(!/^\d{11}$/.test(mobile.value)){
    alert("رقم الموبايل يجب أن يكون 11 رقم");
    return;
  }

  const courses=[];
  document.querySelectorAll(".course-row").forEach(r=>{
    const i=r.querySelectorAll("input");
    courses.push({
      name:i[0].value,
      place:i[1].value,
      duration:i[2].value,
      date:i[3].value
    });
  });

  fetch(scriptURL,{
    method:"POST",
    body:JSON.stringify({
      fullName:fullName.value,
      nationalId:nationalId.value,
      mobile:mobile.value,
      birthDate:birthDate.value,
      gender:gender.value,
      address:address.value,
      university:university.value,
      college:college.value,
      qualification:qualification.value,
      grade:grade.value,
      workPlace:workPlace.value,
      level:level.value,
      hireDate:hireDate.value,
      currentJob:currentJob.value,
      appliedJob:appliedJob.value,
      courses:courses
    })
  })
  .then(r=>r.text())
  .then(t=>{
  if(t==="EXISTS"){
    alert("الرقم القومي مسجل من قبل");
  }else{
    dataForm.reset();
    coursesContainer.innerHTML="";
  }
});
};
</script>

</body>
</html>
